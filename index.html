async function generateImage() {
  const prompt = document.getElementById("prompt").value;
  const output = document.getElementById("output");

  if (!prompt.trim()) {
    output.innerHTML = "❗ Please enter a prompt.";
    return;
  }

  output.innerHTML = "⏳ Generating image...";

  try {
    const res = await fetch("https://api.openai.com/v1/images/generations", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer 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"
      },
      body: JSON.stringify({
        model: "dall-e-3",
        prompt: prompt,
        n: 1,
        size: "1024x1024"
      })
    });

    if (!res.ok) {
      throw new Error(`API Error: ${res.status} ${res.statusText}`);
    }

    const data = await res.json();
    const imageUrl = data.data[0].url;

    output.innerHTML = `
      <img src="${imageUrl}" alt="Generated image" />
      <br/>
      <a href="${imageUrl}" download target="_blank">⬇️ Download</a>
    `;
  } catch (err) {
    output.innerHTML = `<p>❌ Failed to generate image.<br><small>${err.message}</small></p>`;
    console.error(err);
  }
}

